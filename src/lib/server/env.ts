/**
 * In SvelteKit, environment variables are imported from a special $env module.
 *
 * See:
 * https://kit.svelte.dev/docs/modules#$env-static-public
 */
import {
	CTRLHABITS_SERVICE_TYPE as STRING_CTRLHABITS_SERVICE_TYPE,
	FIRESTORE_DEV_CLIENT_EMAIL as STRING_FIRESTORE_DEV_CLIENT_EMAIL,
	FIRESTORE_DEV_PRIVATE_KEY as STRING_FIRESTORE_DEV_PRIVATE_KEY,
	FIRESTORE_DEV_PROJECT_ID as STRING_FIRESTORE_DEV_PROJECT_ID,
	FIRESTORE_PROD_CLIENT_EMAIL as STRING_FIRESTORE_PROD_CLIENT_EMAIL,
	FIRESTORE_PROD_PRIVATE_KEY as STRING_FIRESTORE_PROD_PRIVATE_KEY,
	FIRESTORE_PROD_PROJECT_ID as STRING_FIRESTORE_PROD_PROJECT_ID,
	GITHUB_DEV_SECRET as STRING_GITHUB_DEV_SECRET,
	GITHUB_PROD_SECRET as STRING_GITHUB_PROD_SECRET,
	JWT_SECRET as STRING_JWT_SECRET
} from '$env/static/public';
import { DEV_FLAG_ENABLED } from '$lib/env';
import { parseCTRLHabitsServiceType } from '$lib/ctrlhabits';

export const GITHUB_PROD_SECRET = STRING_GITHUB_PROD_SECRET;
export const GITHUB_DEV_SECRET = STRING_GITHUB_DEV_SECRET;
export const GITHUB_SECRET = DEV_FLAG_ENABLED ? GITHUB_DEV_SECRET : GITHUB_PROD_SECRET;

export const FIRESTORE_PROD_PROJECT_ID = STRING_FIRESTORE_PROD_PROJECT_ID;
export const FIRESTORE_DEV_PROJECT_ID = STRING_FIRESTORE_DEV_PROJECT_ID;
export const FIRESTORE_PROJECT_ID = DEV_FLAG_ENABLED
	? FIRESTORE_DEV_PROJECT_ID
	: FIRESTORE_PROD_PROJECT_ID;

export const FIRESTORE_PROD_CLIENT_EMAIL = STRING_FIRESTORE_PROD_CLIENT_EMAIL;
export const FIRESTORE_DEV_CLIENT_EMAIL = STRING_FIRESTORE_DEV_CLIENT_EMAIL;
export const FIRESTORE_CLIENT_EMAIL = DEV_FLAG_ENABLED
	? FIRESTORE_DEV_CLIENT_EMAIL
	: FIRESTORE_PROD_CLIENT_EMAIL;

export const FIRESTORE_PROD_PRIVATE_KEY = STRING_FIRESTORE_PROD_PRIVATE_KEY;
export const FIRESTORE_DEV_PRIVATE_KEY = STRING_FIRESTORE_DEV_PRIVATE_KEY;
export const FIRESTORE_PRIVATE_KEY = DEV_FLAG_ENABLED
	? FIRESTORE_DEV_PRIVATE_KEY
	: FIRESTORE_PROD_PRIVATE_KEY;

export const JWT_COOKIE = DEV_FLAG_ENABLED ? 'jwt_dev' : 'jwt';
export const JWT_SECRET = STRING_JWT_SECRET;

// @typescript-eslint/no-non-null-assertion
export const CTRLHABITS_SERVICE_TYPE = parseCTRLHabitsServiceType(STRING_CTRLHABITS_SERVICE_TYPE)!;
if (!CTRLHABITS_SERVICE_TYPE) {
	throw new Error(`Invalid USER_SERVICE_TYPE: ${STRING_CTRLHABITS_SERVICE_TYPE}`);
}

export const LOCAL_GITHUB_OAUTH_SERVICE_PATH = './dev/fake_github_oauth_service.json';
export const LOCAL_CTRLHABITS_SERVICE_PATH = './dev/fake_ctrlhabits_service.json';
